<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN"
"http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd"[
<!ENTITY imgroot "images/annotator_analysis_engine_files/" >
<!ENTITY % uimaents SYSTEM "entities.ent" >  
%uimaents;
]>
<!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->
<chapter id="ugr.tool.pear.packager">
  <title></title>
  <section name="PEAR Packager User&apos;s Guide"><a id="_crossRef251"> </a>



<para>A PEAR (Processing Engine ARchive) file is a standard
package for UIMA (Unstructured Information Management Architecture) components.
The PEAR package can be used for distribution and reuse by other components or
applications. It also allows applications and tools to manage UIMA components
automatically for verification, deployment, invocation, testing, etc. Please
refer to the PEAR Reference chapter for more information about the internal
structure of a PEAR file.</para>

<para>This chapter describes how to use the PEAR Eclipse Plugin
to create PEAR files for standard UIMA components.   This plugin is installed if you followed the
directions in <a class="crossrefText" href="UIMA_SDK_Installation_and_Setup.htm#_crossRef372">Chapter
3, <b><emphasis>UIMA
SDK Setup for Eclipse</emphasis></b></a> <a class="crossrefPage" href="UIMA_SDK_Installation_and_Setup.htm#_crossRef372"></a>.</para>



<subsection name="Using the PEAR Eclipse Plugin"><a id="_crossRef252"> </a>



<para>Using
the PEAR Eclipse Plugin involves the following two steps:</para>

<itemizedlist spacing="compact"><listitem>Add the UIMA nature to your
project </listitem>


<listitem>Create a PEAR file using the PEAR
generation wizard
</listitem></itemizedlist>

<h3><a id="_crossRef253">Add UIMA Nature to your project</a></h3>

<para>First, create a project for your UIMA component:</para>

<itemizedlist spacing="compact"><listitem>Create a Java project, which would contain all the files
and folders needed for your UIMA component.</listitem>


<listitem>Create a source folder called <quote>src</quote>
in your project, and make it the only source folder, by clicking on <quote>Properties</quote>
in your project&apos;s context menu (right-click), then select <quote>Java Build Path</quote>,
then add the <quote>src</quote> folder to the source folders list, and remove any
other folder from the list.</listitem>


<listitem>Specify an output folder for your
project called bin, by clicking on <quote>Properties</quote> in your project&apos;s
context menu (right-click), then select <quote>Java Build Path</quote>, and
specify <quote><emphasis>your_project_name</emphasis>/bin</quote> as the default output folder.
</listitem></itemizedlist>

<para>Then,
add the UIMA nature to your project by clicking on <quote>Add UIMA Nature</quote>
in the context menu (right-click) of your project. Click <quote>Yes</quote>
on the <quote>Adding UIMA custom Nature</quote> dialog box. Click <quote>OK</quote>
on the confirmation dialog box.</para>

<para><img alt="" width="612" height="474"
src="../UIMA_SDK_Guide_Ref/PEAR_Packager_files/image002.jpg"/> <span class="figCaption">17. Adding the UIMA Nature</span></para>

<para>Adding the UIMA nature to your project creates the PEAR structure
in your project. The PEAR structure is a structured tree of folders and files,
including the following elements:</para>

<itemizedlist><listitem><b>Required Elements:</b>


<itemizedlist><listitem>The <b>metadata</b> folder which contains the PEAR installation descriptor and
properties files.</listitem>


<listitem>The installation descriptor (<b>metadata/install.xml</b>)

</listitem></itemizedlist></listitem>


<listitem><b>Optional Elements:</b>


<itemizedlist><listitem>The <b>desc</b> folder to contain descriptor files of analysis engines, component
analysis engines (all levels), and other component (Collection Readers, CAS
Consumers, etc).</listitem>


<listitem>The <b>src </b>folder to contain
the source code</listitem>


<listitem>The <b>bin</b> folder to contain executables, scripts, class files, dlls,
shared libraries, etc.</listitem>


<listitem>The <b>lib</b> folder to contain
jar files. </listitem>


<listitem>The <b>doc </b>folder containing
documentation materials, preferably accessible through an index.html.</listitem>


<listitem>The <b>data</b> folder to contain
data files (e.g. for testing).</listitem>


<listitem>The <b>conf</b> folder to contain
configuration files.</listitem>


<listitem>The <b>resources</b> folder to
contain other resources and dependencies.</listitem>


<listitem>Other user-defined folders or
files are allowed, but <u>should be avoided</u>.
</listitem></itemizedlist>
</listitem></itemizedlist>

<para>For more information about the PEAR structure, please
refer to the <quote>Processing Engine Archive</quote> section.</para>

<para><img alt="" width="303" height="394"
src="../UIMA_SDK_Guide_Ref/PEAR_Packager_files/image004.jpg"/></para>

<a class="figCaption" id="_crossRef254a">The PEAR Structure</a>



<h3><a id="_crossRef255">Use the PEAR Generation Wizard</a></h3>

<para>Before using the PEAR Generation Wizard, make sure you add
all the files needed to run your
component including descriptors, jars, external libraries, resources, and component
analysis engines (in the case of an aggregate analysis engine),  etc. It&apos;s recommended to generate a jar file
from your code as an alternative to building the project and making sure the output
folder (bin) contains the required class files.</para>

<para>Then, click on <quote>Generate PEAR file</quote> from the context menu (right-click) of
your project, to open the PEAR Generation wizard, and follow the instructions on the
wizard to generate the PEAR file.</para>

<h4><a id="_crossRef256">The Component Information page</a></h4>

<para>The first page of the PEAR generation wizard is the
component information page. Specify in this page a component ID for your PEAR
and select the main Analysis Engine descriptor. The descriptor must be
specified using a pathname relative to the project&apos;s root (e.g. <quote>desc/MyTAE.xml).
The component id is a string that uniquely identifies the component. It should
use the JAVA naming convention (e.g. org.apache.uima.mycomponent).</para>

<para>Optionally, you can include specific Collection Iterator, CAS
Initializer, or CAS Consumers. In this case, specify the corresponding
descriptors in this page.</para>

<para><img alt="" width="636" height="453"
src="../UIMA_SDK_Guide_Ref/PEAR_Packager_files/image006.jpg"/><span class="figCaption">Figure
19. The component Information
page </span></para>

<h4><a id="_crossRef257">The Installation Environment page</a></h4>

<para>The installation environment page is used to specify the
following:</para>

<itemizedlist spacing="compact"><listitem>Preferred operating system</listitem>


<listitem>Required JDK version, if
applicable.</listitem>


<listitem>Required Environment variable,
such as CLASSPATH
</listitem></itemizedlist>

<para>Path names should be specified using macros (see below),
instead of hard-coded absolute paths that might work locally, but probably won&apos;t
if the PEAR is deployed in a different machine and environment.</para>

<para>Macros are variables such as $main_root, used to represent
a string such as the full path of a certain directory.</para>

<para>These macros should be defined in the PEAR.properties file
using the local values. The tools and applications that use and deploy PEAR
files should replace these macros (in the files included in the conf and desc
folders) with the corresponding values in the local environment as part of the
deployment process.</para>

<para>Currently, there are two types of  macros:</para>

<itemizedlist><listitem>$main_root , which represents the
local absolute path of the main component root directory after deployment. </listitem>


<listitem>$<emphasis>component_id</emphasis>$root, which
represents the local absolute path to the root directory of the component which
has <emphasis>component_id </emphasis> as component ID.
This component could be, for instance, a delegate component.
</listitem></itemizedlist>

<para><img alt="" width="612" height="388"
src="../UIMA_SDK_Guide_Ref/PEAR_Packager_files/image008.jpg"/>
<a class="figCaption" id="ppkgrInstallEnv">The Installation Environment Page</a></para>

<h4><a id="_crossRef258">The PEAR file content page</a></h4>

<para>The last page of the wizard is the </quote>PEAR file Export<quote>
page, which allows the user to select the files to include in the PEAR file.
The metadata folder and all its content is mandatory. Make sure you include all
the files needed to run your
component including descriptors, jars, external libraries, resources, and component
analysis engines (in the case of an aggregate analysis engine),  etc. It&apos;s recommended to generate a jar file
from your code as an alternative to building the project and making sure the
output folder (bin) contains the required class files.</para>

<para>Note: If you are relying on the class files generated in
the output folder (usually called bin) to run your code, then make sure the
project is built properly, and all the required class files are generated
without errors. In this case make sure your output folder (e.g. $main_root/bin)
is in the classpath (see the </quote>Installation Environment&quot; page.</para>



<para><img alt="" width="576" height="434"
src="../UIMA_SDK_Guide_Ref/PEAR_Packager_files/image010.jpg"/>
<a class="figCaption" id="ppkgrExportPg">The PEAR File Export Page</a></para>

</div>

<emphasis><br/>
</emphasis>

</chapter>